import{a as E}from"./chunk-WF3AZV4X.js";import{a as F}from"./chunk-FXJFDX2M.js";import{l as V,m as w,o as T,p as I,q as x}from"./chunk-EFTZMUDG.js";import{$a as n,Fa as u,Ja as c,Qb as D,Wa as k,Xa as g,Ya as v,Za as M,_a as i,ab as h,eb as f,ja as p,qb as s,rb as d,tb as _,ub as b,vb as y,xa as l,yb as S,zb as C}from"./chunk-6QHYGJX4.js";function W(o,a){if(o&1&&(i(0,"div"),s(1),n()),o&2){let e=a.$implicit;l(),d(e)}}var R=class o{constructor(a){this.httpClient=a}mfk1=w();mfkStructureErrors=[];validationResult=p({statusCode:0,statusMessage:"",descriptions:{fundDesc:"",orgDesc:"",deptDesc:""}},{});ngOnInit(){}updateMfk1(){this.mfk1=I("2604350644010000000000602652020100000000")}validateMfk1(){if(this.mfkStructureErrors=T(this.mfk1),this.mfkStructureErrors.length)return;let e=`https://apps.its.uiowa.edu/mfk/api-singleDesc.jsp?mfk=10%20%20%20${V(this.mfk1).replace(/-/g,"")}`;return this.httpClient.get(e,{responseType:"text"}).subscribe(t=>{let r=t.split(/\n/);this.validationResult.set({statusCode:+r[0],statusMessage:r[1].trim(),descriptions:this.parseMfkComponents(r[2])})})}parseMfkComponents(a){var e=a.split(",");return{fundDesc:e.filter(t=>t.trim().startsWith("FUND="))[0].split("=")[1],orgDesc:e.filter(t=>t.trim().startsWith("ORG="))[0].split("=")[1],deptDesc:e.filter(t=>t.trim().startsWith("DEPT="))[0].split("=")[1],iactDesc:e.filter(t=>t.trim().startsWith("IACT="))[0].split("=")[1]}}static \u0275fac=function(e){return new(e||o)(u(E))};static \u0275cmp=c({type:o,selectors:[["app-mfk-validations"]],decls:22,vars:5,consts:[["id","update-mfk-value"],[1,"h2"],[1,"form-inline"],["for","mfk-container_mfk1",1,"fw-bold","justify-content-start",2,"width","100px"],["id","mfk1",3,"mfkChange","mfk"],["id","mfk1-string"],[3,"mfk"],[1,"my-2"],["id","set-value-btn","type","button",1,"btn","btn-secondary","me-2",3,"click"],["id","validate-btn","type","button",1,"btn","btn-primary",3,"click"],[1,"text-danger"]],template:function(e,t){e&1&&(i(0,"section",0)(1,"p",1),s(2,"MFK Validations"),n(),i(3,"div",2)(4,"label",3),s(5," MFK "),n(),i(6,"uiowa-mfk-input",4),y("mfkChange",function(m){return b(t.mfk1,m)||(t.mfk1=m),m}),n()(),i(7,"div",5),s(8," MFK: "),h(9,"uiowa-mfk-string",6),n(),i(10,"div",7)(11,"button",8),f("click",function(){return t.updateMfk1()}),s(12," Set an MFK Value "),n(),i(13,"button",9),f("click",function(){return t.validateMfk1()}),s(14," Validate "),n()(),i(15,"div",10),g(16,W,2,1,"div",null,k),n(),i(18,"div")(19,"pre"),s(20),S(21,"json"),n()()()),e&2&&(l(6),_("mfk",t.mfk1),l(3),M("mfk",t.mfk1),l(7),v(t.mfkStructureErrors),l(4),d(C(21,3,t.validationResult())))},dependencies:[x,F,D],encapsulation:2})};export{R as MfkValidations};
